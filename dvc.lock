schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data/data_ingestion.py
    deps:
    - path: src/data/data_ingestion.py
      hash: md5
      md5: 74ec195400e5853a5318be1133b5ee50
      size: 3648
    params:
      params.yaml:
        data_ingestion.data_url: 
          https://raw.githubusercontent.com/Himanshu-1703/reddit-sentiment-analysis/refs/heads/main/data/reddit.csv
        data_ingestion.random_state: 42
        data_ingestion.test_size: 0.25
    outs:
    - path: data/raw/test.csv
      hash: md5
      md5: 7d83ffdba7120051942474d860900543
      size: 1719368
    - path: data/raw/train.csv
      hash: md5
      md5: 11449d02b3efb3d6394a48ecbb8fde57
      size: 5169586
  data_preprocessing:
    cmd: python src/data/data_preprocessing.py
    deps:
    - path: data/raw/test.csv
      hash: md5
      md5: 7d83ffdba7120051942474d860900543
      size: 1719368
    - path: data/raw/train.csv
      hash: md5
      md5: 11449d02b3efb3d6394a48ecbb8fde57
      size: 5169586
    - path: src/data/data_preprocessing.py
      hash: md5
      md5: 723a8162874559193a299c16bd8dbad3
      size: 5049
    - path: src/utils/common_text_preprocess.py
      hash: md5
      md5: 2fe239eae26e1a786f880c89082daba2
      size: 2140
    params:
      params.yaml:
        data_preprocessing.text_column: clean_comment
    outs:
    - path: data/interim/test_processed.csv
      hash: md5
      md5: 4f08228d921fe17ff9ba52e5f694e52a
      size: 1273388
    - path: data/interim/train_processed.csv
      hash: md5
      md5: 027303d50f022e616c8ff19f68bc26c1
      size: 3843331
  feature_engineering:
    cmd: python src/features/feature_engineering.py
    deps:
    - path: data/interim/test_processed.csv
      hash: md5
      md5: 4f08228d921fe17ff9ba52e5f694e52a
      size: 1273388
    - path: data/interim/train_processed.csv
      hash: md5
      md5: 027303d50f022e616c8ff19f68bc26c1
      size: 3843331
    - path: src/features/feature_engineering.py
      hash: md5
      md5: 81d0651720595f58cb423c9e2e398422
      size: 3936
    params:
      params.yaml:
        feature_engineering.max_features: 10000
        feature_engineering.ngram_range:
        - 1
        - 2
    outs:
    - path: data/processed/test_tfidf.csv
      hash: md5
      md5: 3407c88671eacf567f59dfe1ba224742
      size: 371016732
    - path: data/processed/train_tfidf.csv
      hash: md5
      md5: 00df24b4f29c11a50454a58c9fcb7596
      size: 1109672107
    - path: models/tfidf_vectorizer.pkl
      hash: md5
      md5: c0db5193b4e0edb69cb56f2d04be8627
      size: 379706
  model_building:
    cmd: python src/model/model_building.py
    deps:
    - path: data/processed/train_tfidf.csv
      hash: md5
      md5: 00df24b4f29c11a50454a58c9fcb7596
      size: 1109672107
    - path: src/model/model_building.py
      hash: md5
      md5: 324c2e36a65db55ba41a816d8360028f
      size: 3662
    params:
      params.yaml:
        model_building.class_weight: balanced
        model_building.learning_rate: 0.21867709163273838
        model_building.n_estimators: 117
        model_building.objective: multiclass
    outs:
    - path: models/lightgbm_model.pkl
      hash: md5
      md5: 747dc26618425d1bb0a77e59a3ab8c6b
      size: 1238476
  model_evaluation:
    cmd: python src/model/model_evaluation.py
    deps:
    - path: data/processed/test_tfidf.csv
      hash: md5
      md5: 3407c88671eacf567f59dfe1ba224742
      size: 371016732
    - path: models/lightgbm_model.pkl
      hash: md5
      md5: 747dc26618425d1bb0a77e59a3ab8c6b
      size: 1238476
    - path: src/model/model_evaluation.py
      hash: md5
      md5: 2cef40679c8dadbc029957191c427c05
      size: 5739
    outs:
    - path: metrics.json
      hash: md5
      md5: 54e1a79967f4d719924fbce53d119a56
      size: 145
